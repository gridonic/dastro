---
import type {ComponentProps} from 'astro/types';
import {Image} from '@datocms/astro';
import type {ImageAssetData} from "../component.types";

interface Props extends Omit<ComponentProps<typeof Image>, 'data'> {
  data: ImageAssetData;
  class?: string;
}

const {data, class: classNames, ...rest} = Astro.props;
---

<div class="image-asset" class:list={classNames} {...rest}>
  <!-- @see https://github.com/datocms/astro-datocms/tree/main/src/Image -->
  {data.responsiveImage &&
    <Image data={data.responsiveImage} {...rest}/>}
</div>

<style>
  .image-asset {
    display: inline-block;
    width: 100%;
  }

  .image-asset :global(img) {
      max-width: none !important; /* We need to trump this for our fluid approach */
  }
</style>
